# Установка движка

Прежде чем творить или просто устанавливать модификации, нам необходимо подготовить [средства для изменения игры](methodology#движок-пак-и-лаунчер). Почему я не могу изменять игру напрямую? По умолчанию, Майнкрафт имеет закрытый исходный код и не предусматривает изменения игрового процесса, исключая разве что [пакеты поведения](https://bedrock.dev/docs/1.16.0.0/1.16.200.56/Addons).

## Начнем с лаунчера

Для использования Inner Core нужен лаунчер, он позволит производить манипуляции с играми, модифицировать их соответственно. Также понадобится любое устройство на Android, важно иметь хотя бы несколько гигабайт ОЗУ за плечами и такое же количество свободного места в хранилище, слабый процессор тоже не подойдет. Загрузите и установите приложение по [указанной ссылке](https://drive.google.com/file/d/14SBKQSYbMGRT-Z5_cowYVfYiWTKD605c/view?usp=sharing).

<!-- TODO: Начните с [определения версии](https://lumpics.ru/how-find-out-version-of-android-on-phone/) вашего устройства — это нужно для установки лаунчера правильной версии.

| Версия Android | Ссылка на приложение |
| --- | --- |
| 5.0 — 10 | [Horizon Modding Kernel — Google Play](https://play.google.com/store/apps/details?id=com.zheka.horizon) |
| 5.0 и выше | [Horizon для актуальных версий](https://drive.google.com/file/d/14SBKQSYbMGRT-Z5_cowYVfYiWTKD605c/view?usp=sharing) |
| 5.0 — 11 | [Horizon для Android 11](https://drive.google.com/file/d/14SBKQSYbMGRT-Z5_cowYVfYiWTKD605c/view?usp=sharing) |
| 4.2 — 10 | [Horizon для эмуляторов и Huawei (без сервисов Google Play)](https://drive.google.com/file/d/1JYR3y7rYQtfuk3SGThNK3yo2mrSMAJm-/view?usp=sharing) |
| 4.2 — 8.1 | [Inner Core — Trashbox (для слабых устройств, не поддерживается)](https://trashbox.ru/link/inner-core-android) | -->

:::tip Установка сторонних приложений

Перед установкой не забудьте [разрешить установку из неизвестных источников](https://lumpics.ru/how-allow-installation-from-unknown-sources-on-android/), если приложение загружается вне магазина.

:::

## Загружаем новый пак

Сразу же после первого открытия лаунчера будет предложено установить один из доступных паков, в котором должно быть три основных варианта, выбирайте лучший для себя:

- Inner Core — основная версия пака, подходящая для большинства задач. Разработчики обязаны обеспечивать совместимость с этой версией вне зависимости от потребностей, иначе опубликованный мод может быть скрыт от остальных силами модератов браузера.
- Inner Core Test — здесь разработчик пака может примерять экспериментальные возможности, общение с сообществом помогает отладить неработоспособные интерфейсы и избежать проблем на основном паке. В последнее время, первые две версии идентичны и не отличаются друг от друга.
- Inner Core Legacy — версия чуть постарше на прошлой версии игры, часть оптимизированных модов может запускаться только на ней. Почему-то не обновляется, хотя код последних версий и подразумевает использование легаси версии в качестве основной для модов.

:::warning Список паков пустой?

Проверьте подключение к интернету, если все в порядке — значит в стране вашего прибывания, либо у представителя услуг связи, есть запрет на использование сайта [GitLab](https://status.gitlab.com/). Воспользуйтесь VPN для установки паков, можно подобрать подходящий, обновляя представленный сайт. Проверьте статус GitLab, возможно сейчас на нем ведется техобсуживание, обычно занимающее не более 3 часов.

:::

Придумайте название или оставьте его стандартным, теперь пак появится в основном списке. Он выделен серым цветом, что означает, что установка еще не завершена. Выберите его и подтвердите загрузку, если все в порядке и архив с паком был распакован, он запустится или лаунчер закроется. Оба варианта приемлимы, установка завершена, откройте лаунчер если он закрылся.

### Соблюдаем условия лицензии

Убедитесь, что у вас [загружена игра](https://play.google.com/store/apps/details?id=com.mojang.minecraftpe&hl=ru). Версия не имеет значения, поскольку лаунчер запускает собственную и никак не взаимодействует с установленной на устройстве (даже использует другие папки для настроек и миров). На момент разработки можно [воспользоваться пустышкой](https://github.com/Nernar/Minecraft-Stub/releases/latest), это автоматически означает, что игра уже была приобретена и просто нет нужны ее устанавливать.

:::

## Что тут есть и как это использовать

Интерфейс предоставляется лаунчером и кастомизируется, или же изменяется, самим паком. Огромная кнопка _Играть_ по центру экрана запустит игру соответственно, загружая установленные моды в выбранном модпаке. Помимо этого, перед нами предстают три основные вкладки по правой части экрана, представляющие доступ к основным возможностям:

1. Нативные моды — модификации, создаваемые на уровне самой игры. Это встроенная в Хорайзон возможность, позволяющая напрямую работать с ядром игры, а не из отдельных модов движка. Содержит поддержку нативного кода игры и изменения ее ресурсов. Для Inner Core необходимость по большей степени отпадает, так как моды движка свободно могут обращаться к нативу.

2. Менеджер модов — встроенный менеджер для установки модов и модпаков, а также их управления, каждый может свободно загружать в него свои проекты для публикации. Сам менеджер содержит несколько различных вкладок для установки и управления установленными проектами:

    1. Скачать моды — загрузка модов из встроенного браузера, основной ресурс движка для получения новых модов. Найдите что-то нужное, отфильтруйте модификации по новым и просто загрузите случайные. Не забывайте также и то, что существует несколько типов пометок:

        <!-- TODO: <span style="color: green">Адаптирован</span> -->
        - Адаптирован — мод обновлен со [времен устаревшой версии](#устаревшая-версия-inner-core) для поддержки Хорайзона, что означает работоспособность хотя бы на легаси версии Inner Core в Хорайзоне. Может также означать, что мод создан для работы на стороне клиента (по типу миникарт и прочего).
        <!-- TODO: <span style="color: blue">Есть Мультиплеер</span> -->
        - Есть Мультиплеер — идеальный кандидат на установку в последних версиях, скорее всего все работает стабильно и разработчики позаботились об этом.

    2. Мои моды — список модов в выбранном модпаке. Здесь их можно удалить, узнать информацию и сделать еще несколько полезных действий. Основная часть менеджера, не считая вкладки для загрузки.

    3. Сборки модов — сборки, или же модпаки, могут как просто содержать раздельный список модов, так и объединять несколько модов ядром, создающим интеграции между ними. Здесь модпаками можно управлять и загрузить новые при необходимости.

    4. Обновления — со временем, моды в выбранном модпаке, или же весь модпак, обновляются разработчиками этих проектов. В таком случае на вкладке появится счетчик доступных обновлений, когда вы откроете мененджер модов после следующего запуска.

3. Настройки и ссылки — экспериментальные настройки (ни в коем случае не предлагайте пользователям изменять их из своих модов), информация о приложении и список основных источников вдохновения для создания проектов.

## Находим папку с паком

Для начала разработки нужно найти папку с содержимым движка и самой игры, в ней же располагаются установленные моды и модпаки, включающие в себя все ресурсы и скрипты. Просто устанавливаете моды из браузера? Вероятно, вам смогут потребоваться логи, чтобы отправлять ошибки разработчикам если таковые возникнут.

### Установка файлового менеджера

Начните с установки проводника, большинство операций во встроенном файловом менеджере выполнить нельзя. Выберите тот, который кажется вам удобнее — будем создавать и распаковывать архивы, важен доступ к папке _Android/data_, встроенный текстовый редактор не будет лишним. Могу посоветовать [Solid Explorer](https://play.google.com/store/apps/details?id=pl.solidexplorer2&hl=ru), лично использую его и всем доволен. Неплохим вариантом до Android 12 будет [FX File Explorer](https://play.google.com/store/apps/details?id=nextapp.fx&hl=ru), многим нравится [ES File Explorer](https://es-file-explorer.ru.uptodown.com/android), опять же выбирайте по собственному комфорту — сильной разницы не будет.

### Определяем местонахождение папки лаунчера

Все зависит от [выбранной версии лаунчера](#начнем-с-лаунчера), если он установлен из Google Play или для эмулятора — это легаси, в противном случае — стандартная. Инструкции отличаются лишь для поиска основной папки лаунчера, ее содержимое остается идентичным в любом из вариантов.

Легаси версия (поддерживается на Android не выше 11):

1. Откройте файловый менеджер, найдите вкладку _внутреннее хранилище_, либо же _память телефона_.
2. Найдите в списке файлов папку _games_, в ней располагается подпапка _horizon_.

Стандартная версия (поддерживается на любом устройстве):

1. Откройте файловый менеджер, найдите вкладку _внутреннее хранилище_, либо же _память телефона_ (если проводник предложит предоставить доступ к файлам, обязательно предоставьте).
2. Найдите в списке файлов папку _Android_, в ней располагается подпапка _data_ (если ваш проводник не отображает эту папку, вероятно он поддерживается, установите другой).
3. Проводник запросит подтверждение для доступа к этой папке (если нет, он опять же не поддерживается), одобряем и перед нами открывается встроенный файловый менеджер для выбора целевой папки.
4. Если открывается открывается папка с путем _Android > data_, нажимаем _использовать эту папку_, в противном случае, если найти нужную папку не получается, установите другой проводник.
5. Откройте папку _com.zheka.horizon_, в ней _files_, а внутри нее _horizon_.

:::info Сократите время для себя и других

И не поленитесь добавить папку в закладки, обычно это делается через удержание файла до получения дополнительных опций или через его свойства.

:::

### Общие папки, которые могут пригодиться

Установленные паки находятся в папке _packs_, относительно лаунчера. Давайте рассмотрим содержимое стандартного пака Inner Core (обычно в подпапке _Inner\_Core_), обозначая общую структуру, а также посмотрим что полезного есть в основной папке лаунчера.

#### Inner Core

| Путь к файлу | Предназначение содержимого |
| --- | --- |
| assets/ | Файлы, некогда находящиеся внутри самой игры представленной версии. Работают подобно встроенным в Android ассетам, за одной лишь разницей что местоположение таких ассетов во внутреннем хранилище. Никогда не редактируйте содержимое этой папки напрямую! |
| modpacks/ | Содержимое сборок, или же модпаков, содержащих в себе основную папку с модами _mods_, различных конфигураций и собственных пакетов, как ресурсов, так и поведения. Уровень кастомизации содержимого очень высок и будет неоднократно рассмотрен. |
| innercore/ | Основной модпак, имеющий немного измененную структуру в силу отсуствия возможности конфигурации. Здесь также хранятся настройки и _inner-core.log_, содержащий последний отчет, или же лог, самого движка. Обычно немного меньше основных логов лаунчера, позволяя понять возникшую проблему быстрее. |
| resourcepacks/ | Пакеты ресурсов лишь для этого пака, обычно помещаются самим пользователем если нужно установить дополнительные изменения. |
| worlds/ | Подобно обычной папке с мирами, движок использует собственный список миров, никак не передаваемый между паками. Служит для отделения папок от основной игры и модпаков. |

#### Хорайзон

| Путь к файлу | Предназначение содержимого |
| --- | --- |
| packs/ | Установленные паки соответственно, их можно клонировать из самого лаунчера при необходимости. |
| logs/ | Место, где можно найти последний отчет, или же лог, лаунчера (включает и лог движка) _log.txt_, прошлые версии этого лога _log.txt.\<число от 0 до 6\>_, лог запуска самого лаунчера _core-log.txt_ и такие же прошлые версии (бекапы). Если произошла фатальная ошибка (приложение вылетело), можно узнать причину из самого лаунчера и файлов _crash.txt_ с такими же бекапами, а также после их архивации в приложении появитяс _archived-crash-\<случайное число\>.txt_. |
| resource_packs/ | Глобальные пакеты ресурсов для всех паков, доступны из любой версии игры соответственно. Пакеты ресурсов, указанные в модах, копируются и удаляются отсюда соответственно во время запуска. |
| behavior_packs/ | Глобальные пакеты поведения, логика схожа с пакетами ресурсов, исключая разве что отсутствие отдельной папки внутри пака. |

:::tip Если разработчик просит предоставить логи

Не мучайтесь с отбором файлов, просто сожмите папку _logs_ целиком в архив и отправьте как отчет. Тоже самое и если во время игры были замечены проблемы, логи и прошлые ошибки пригодятся для формирования цельной картины. Так создатели проекта намного быстрее смогут понять причину произошедшего.

:::

#### Устаревшая версия Inner Core

Не путайте с легаси версией, это отдельное приложения вне Хорайзона, не так давно удаленное из Google Play в силу неработоспособности и отсутствия обновлений. В целом, весь контент базируется на папках самой игры и нет особого смысла расписывать все папки подряд. Весь контент лежит в подпапке _com.mojang_ все той же _games_.

| Путь к файлу | Предназначение содержимого |
| --- | --- |
| mods/ | Папка с установленными модами, речи о сборках не идет впринципе. Структура модов отличается лишь отсутствием новых возможностей по типу поддержки новых языков, добавления пакетов ресурсов и поведения, и прочего. |
| innercoreWorlds/ | Отдельная папка с мирами, чтобы не было конфликтов с основной игрой если она установлена. |
| innercore/ | Здесь находятся все настройки движка, а также последний лог _inner-core.log_. |
